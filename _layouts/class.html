<!doctype html>
<html lang="en">
  <head>
    {% include html-head.html %}
    <link rel="stylesheet" href="/css/banner-content.css">
    <link rel="stylesheet" href="/css/class.css">
  </head>
  <body>
    {% include nav.html %}
    <div class='banner'>
      <div class="banner-backdrop"></div>

      <div id="banner-title">
        {{ page.title }}
      </div>
    </div>

    {{ page.directory }}
    <div class="projects-display">
      {% assign projects = site.projects | where: 'year', page.year %}

      <div class="class-project-display">
        {% assign group_proj = projects | where: 'group', true | first %}
        {% assign group_full_url = group_proj.url | split: '/' %}
        {% assign group_dir = group_full_url | slice: 0, 3 | join: '/' %}

        <div class="class-project-backdrop">
          <div class="class-project-name">
            {{ group_proj.name }}
          </div>
        </div>

        <div class="class-project-description">
          {{ group_proj.description }}
        </div>
      </div>

      <div class="individual-projects-display">
        {% assign individuals = projects 
          | where_exp: 'item', "item.group != true" 
          | where_exp: 'item', "item.layout != 'class'"
        %} 

        {% for proj in individuals %}
          {% assign full_url = proj.url | split: '/' %}
          {% assign dir = full_url | slice: 0, 3 | join: '/' %}

          <a href="{{ dir }}">
            <div
            style="background-image: url('{{ dir }}/banner.png')"
            class="individual-project-backdrop">
            </div>

            {{ proj.name }}-{{ proj.creators }}
          </a>
        {% endfor %}
      </div>
      </div>
    </div>
  </body>
</html>

<style>
.banner-backdrop {
  position: absolute;
  z-index: -1;
  width: 100%;
  height: 100%;

  background-image: url('banner.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  
  filter: blur(4px);
  -webkit-filter: blur(4px);
  -moz-filter: blur(4px);
  transform: scale(1.03); /* to remove the blurry white border */
}

#banner-title::after {
  content: '{{ page.subtitle }}';
  position: absolute;
  display: block;

  font-size: 0.3em;
  color: lightgrey;
  right: -5em;
}

.class-project-backdrop {
  background-image: url('{{ group_dir }}/banner.png');
}
</style>